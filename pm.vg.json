{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 800,
    "height": 400,
    "title": "Quality of Coffee in Countries working with the CQI as of May 2023",
    "projection": {"type": "equalEarth"},
    "data": {
      "url": "https://raw.githubusercontent.com/andrewooi924/andrewooi924.github.io/main/data/ne_110m.json",
      "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}}, 
    "layer": [
      {
        "data": {"sphere": true},
        "mark": {"type": "geoshape", "fill": "lightskyblue"}
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/andrewooi924/andrewooi924.github.io/main/data/ne_110m.json",
          "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
        },
        "mark": {"type": "geoshape", "fill": null, "stroke": "gray"}
      },
      {
        "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"}
      },
      {
        "transform": [
            {
                "lookup": "properties.NAME",
                "from": {
                    "data": {
                      "url": "https://raw.githubusercontent.com/andrewooi924/andrewooi924.github.io/main/data/df_arabica_clean.csv"
                    },
                    "key": "Country of Origin",
                    "fields": ["Country of Origin", "Total Cup Points", "Grading Date", "Expiration", "Lifetime"]
                }
            }
        ],
        "mark": {"type": "circle"},
        "encoding": {
            "longitude": {"field": "properties.LABEL_X", "type": "quantitative"},
            "latitude": {"field": "properties.LABEL_Y", "type": "quantitative"},
            "size": {
                "field": "Lifetime",
                "type": "quantitative",
                "scale": {"domain":[335,366]}
            },
            "color": {
                "field": "Total Cup Points",
                "type": "quantitative",
                "scale": {"range": ["#ffffe5",
                    "#fff7bc",
                    "#fee391",
                    "#fec44f",
                    "#fe9929",
                    "#ec7014",
                    "#cc4c02",
                    "#993404",
                    "#662506"]}
            },
            "tooltip": [
                {"field": "Country of Origin", "type": "nominal"},
                {"field": "Total Cup Points", "type": "quantitative"},
                {"field": "Lifetime", "type": "quantitative"}
            ]
        }
      }
    ]
  }